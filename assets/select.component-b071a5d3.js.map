{"version":3,"file":"select.component-b071a5d3.js","sources":["../../../react-formio/src/components/select/select.component.tsx"],"sourcesContent":["import Choices from \"@formio/choices.js\";\nimport classnames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport React, { ReactElement, useEffect, useRef } from \"react\";\n\nimport { getEventValue } from \"../../utils/getEventValue\";\nimport { FormControl, FormControlProps } from \"../form-control/formControl.component\";\n\nexport interface SelectProps<T = any> extends FormControlProps {\n  value?: any;\n  size?: string;\n  onChange?: (name: string, value: any) => void;\n  placeholder?: string;\n  choices: { label: string; value: T }[];\n  layout?: \"html5\" | \"choicesjs\";\n  multiple?: boolean;\n\n  [key: string]: any;\n}\n\nexport function Select<T = any>({\n  name,\n  label,\n  size,\n  onChange,\n  required,\n  value,\n  choices,\n  description,\n  placeholder,\n  prefix,\n  suffix,\n  multiple,\n  layout,\n  ...props\n}: SelectProps<T>): ReactElement {\n  const ref = useRef<any>();\n\n  useEffect(() => {\n    let instance: any;\n\n    if (layout === \"choicesjs\") {\n      instance = new Choices(ref.current, {\n        removeItemButton: true,\n        placeholderValue: placeholder\n      });\n    }\n\n    return () => {\n      instance && instance.destroy();\n    };\n  }, []);\n\n  choices =\n    layout === \"choicesjs\" || multiple || !placeholder\n      ? choices\n      : ([\n          {\n            label: placeholder,\n            value: \"\"\n          },\n          ...choices\n        ] as any[]);\n\n  return (\n    <FormControl name={name} label={label} required={required} description={description} prefix={prefix} suffix={suffix} shadow={false}>\n      {/* eslint-disable-next-line jsx-a11y/no-onchange */}\n      <select\n        ref={ref}\n        {...props}\n        data-testid={`select_${name}`}\n        className={classnames(\"form-control\", size && `form-control-${size}`)}\n        name={name}\n        id={name}\n        multiple={multiple}\n        value={value || (\"\" as any)}\n        placeholder={placeholder}\n        onChange={(event) => {\n          onChange && onChange(name, getEventValue(event));\n        }}\n      >\n        {choices.map(({ label, value }) => {\n          return (\n            <option key={String(value)} label={label} value={value as any}>\n              {label}\n            </option>\n          );\n        })}\n      </select>\n    </FormControl>\n  );\n}\n\nSelect.propTypes = {\n  label: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  value: PropTypes.any,\n  required: PropTypes.bool,\n  onChange: PropTypes.func,\n  choices: PropTypes.array.isRequired\n};\n"],"names":["Select","name","label","size","onChange","required","value","choices","description","placeholder","prefix","suffix","multiple","layout","props","ref","useRef","useEffect","instance","Choices","jsx","FormControl","classnames","event","getEventValue","PropTypes"],"mappings":"wTAoBO,SAASA,EAAgB,CAC9B,KAAAC,EACA,MAAAC,EACA,KAAAC,EACA,SAAAC,EACA,SAAAC,EACA,MAAAC,EACA,QAAAC,EACA,YAAAC,EACA,YAAAC,EACA,OAAAC,EACA,OAAAC,EACA,SAAAC,EACA,OAAAC,EACA,GAAGC,CACL,EAAiC,CAC/B,MAAMC,EAAMC,EAAAA,SAEZC,OAAAA,EAAAA,UAAU,IAAM,CACV,IAAAC,EAEJ,OAAIL,IAAW,cACFK,EAAA,IAAIC,EAAQJ,EAAI,QAAS,CAClC,iBAAkB,GAClB,iBAAkBN,CAAA,CACnB,GAGI,IAAM,CACXS,GAAYA,EAAS,SAAQ,CAEjC,EAAG,CAAE,CAAA,EAELX,EACEM,IAAW,aAAeD,GAAY,CAACH,EACnCF,EACC,CACC,CACE,MAAOE,EACP,MAAO,EACT,EACA,GAAGF,CAAA,EAITa,EAACC,GAAY,KAAApB,EAAY,MAAAC,EAAc,SAAAG,EAAoB,YAAAG,EAA0B,OAAAE,EAAgB,OAAAC,EAAgB,OAAQ,GAE3H,SAAAS,EAAC,SAAA,CACC,IAAAL,EACC,GAAGD,EACJ,cAAa,UAAUb,IACvB,UAAWqB,EAAW,eAAgBnB,GAAQ,gBAAgBA,GAAM,EACpE,KAAAF,EACA,GAAIA,EACJ,SAAAW,EACA,MAAON,GAAU,GACjB,YAAAG,EACA,SAAWc,GAAU,CACnBnB,GAAYA,EAASH,EAAMuB,EAAcD,CAAK,CAAC,CACjD,EAEC,SAAAhB,EAAQ,IAAI,CAAC,CAAE,MAAAL,EAAO,MAAAI,KAEnBc,EAAC,SAA2B,CAAA,MAAOlB,EAAO,MAAOI,EAC9C,SAAAJ,CAAAA,EADU,OAAOI,CAAK,CAEzB,CAEH,CAAA,CAEL,CAAA,CAAA,CAEJ,CAEAN,EAAO,UAAY,CACjB,MAAOyB,EAAU,OACjB,KAAMA,EAAU,OAAO,WACvB,MAAOA,EAAU,IACjB,SAAUA,EAAU,KACpB,SAAUA,EAAU,KACpB,QAASA,EAAU,MAAM,UAC3B"}