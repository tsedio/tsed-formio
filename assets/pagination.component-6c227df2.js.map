{"version":3,"file":"pagination.component-6c227df2.js","sources":["../../../react-formio/src/components/table/utils/getPageNumbers.ts","../../../react-formio/src/components/pagination/pagination.component.tsx"],"sourcesContent":["export const LEFT_PAGE = \"LEFT\";\nexport const RIGHT_PAGE = \"RIGHT\";\n\nfunction range(from: number, to: number, step = 1): any[] {\n  let i = from;\n  const range = [];\n\n  while (i <= to) {\n    range.push(i);\n    i += step;\n  }\n\n  return range;\n}\n\nexport function getPageNumbers({ currentPage, pageNeighbours = 1, totalPages }: any) {\n  const totalNumbers = pageNeighbours * 2 + 3;\n  const totalBlocks = totalNumbers + 2;\n\n  if (totalPages > totalBlocks) {\n    const calculatedStartPage = Math.max(2, currentPage - pageNeighbours);\n    const calculatedEndPage = Math.min(totalPages - 1, currentPage + pageNeighbours);\n    const startPage = calculatedStartPage === 3 ? 2 : calculatedStartPage;\n    const endPage = calculatedEndPage === totalPages - 2 ? totalPages - 1 : calculatedEndPage;\n\n    let pages = range(startPage, endPage);\n\n    const hasLeftSpill = startPage > 2;\n    const hasRightSpill = totalPages - endPage > 1;\n    const spillOffset = totalNumbers - (pages.length + 1);\n    let extraPages;\n\n    if (hasLeftSpill && !hasRightSpill) {\n      extraPages = range(startPage - spillOffset, startPage - 1);\n      pages = [LEFT_PAGE, ...extraPages, ...pages];\n    } else if (!hasLeftSpill && hasRightSpill) {\n      extraPages = range(endPage + 1, endPage + spillOffset);\n      pages = [...pages, ...extraPages, RIGHT_PAGE];\n    } else {\n      pages = [LEFT_PAGE, ...pages, RIGHT_PAGE];\n    }\n\n    return [1, ...pages, totalPages];\n  }\n\n  return range(1, totalPages);\n}\n","import classnames from \"classnames\";\nimport React, { PropsWithChildren } from \"react\";\n\nimport { Select } from \"../select/select.component\";\nimport { getPageNumbers, LEFT_PAGE, RIGHT_PAGE } from \"../table/utils/getPageNumbers\";\n\nfunction PaginationButton(\n  props: PropsWithChildren<\n    {\n      component?: any;\n      disabled?: boolean;\n      className?: string;\n      active?: boolean;\n    } & Record<string, any>\n  >\n) {\n  const { component: Component = \"button\", children, disabled, active, ...otherProps } = props;\n\n  return (\n    <Component\n      {...otherProps}\n      data-testid='pagination-button'\n      disabled={disabled}\n      className={classnames(\"page-link\", disabled ? \"disabled\" : \"\", active ? \"\" : \"\", props.className)}\n    >\n      {children}\n    </Component>\n  );\n}\n\nexport interface PaginationProps {\n  className?: string;\n  pageSizes?: number[];\n  gotoPage: any;\n  canPreviousPage: boolean;\n  previousPage: any;\n  nextPage: any;\n  canNextPage: boolean;\n  pageCount: number;\n  pageIndex: number;\n  pageOptions?: number[];\n  pageSize: number;\n  setPageSize: any;\n  totalLength?: number;\n  i18n?: (f: string) => string;\n}\n\nexport function Pagination(props: PaginationProps) {\n  const {\n    className,\n    pageSizes = [10, 25, 50, 100],\n    gotoPage,\n    canPreviousPage,\n    previousPage,\n    nextPage,\n    canNextPage,\n    pageCount,\n    pageIndex = 1,\n    pageOptions,\n    pageSize,\n    setPageSize,\n    totalLength,\n    i18n = (f: string) => f\n  } = props;\n\n  const pageNumbers = getPageNumbers({\n    currentPage: pageIndex,\n    // pageNeighbours,\n    totalPages: pageCount\n  });\n  const choices: any[] = pageSizes.map((value) => ({ value, label: value }));\n\n  return (\n    <nav aria-label='Page navigation' className={classnames(\"pagination-group -mb-3\", className)}>\n      <ul className='pagination mb-3 mr-3'>\n        <li className={classnames(\"page-item\", !canPreviousPage && \"disabled\")}>\n          <PaginationButton tabIndex={-1} disabled={!canPreviousPage} onClick={() => previousPage()}>\n            {i18n(\"Previous\")}\n          </PaginationButton>\n        </li>\n\n        {pageNumbers.map((page) => {\n          if ([LEFT_PAGE, RIGHT_PAGE].includes(page)) {\n            return (\n              <li className='page-item' key={page}>\n                <PaginationButton aria-hidden='true'>...</PaginationButton>\n              </li>\n            );\n          }\n\n          const active = page - 1 === pageIndex;\n          return (\n            <li className={classnames(\"page-item\", active && \"active\")} key={page}>\n              <PaginationButton tabIndex={pageIndex} active={active} onClick={() => gotoPage(page - 1)}>\n                {page}\n              </PaginationButton>\n            </li>\n          );\n        })}\n\n        <li className={classnames(\"page-item\", !canNextPage && \"disabled\")}>\n          <PaginationButton tabIndex={pageNumbers.length} disabled={!canNextPage} onClick={() => nextPage()}>\n            {i18n(\"Next\")}\n          </PaginationButton>\n        </li>\n      </ul>\n\n      <li className='mb-3 mr-3 flex items-center'>\n        <Select\n          name={\"page\"}\n          value={pageSize}\n          choices={choices}\n          onChange={(name: string, value: number) => {\n            setPageSize(+value);\n          }}\n        />\n        <span className={\"ml-3\"}>{i18n(\"items per page\")}</span>\n      </li>\n      {pageOptions && (\n        <li className={\"mb-3 mr-3 flex items-center\"}>\n          <span>{i18n(\"Page\")}&nbsp;</span>\n          <strong>\n            {pageIndex + 1} of {pageOptions.length}\n          </strong>\n        </li>\n      )}\n      {totalLength !== undefined && (\n        <li className={\"mb-3 flex items-center\"} data-testid='pagination-total-items'>\n          {i18n(\"Total\")}: <strong className='mx-1'>{new Intl.NumberFormat(undefined).format(totalLength)}</strong> {i18n(\"items\")}\n        </li>\n      )}\n    </nav>\n  );\n}\n"],"names":["LEFT_PAGE","RIGHT_PAGE","range","from","to","step","getPageNumbers","currentPage","pageNeighbours","totalPages","totalNumbers","totalBlocks","calculatedStartPage","calculatedEndPage","startPage","endPage","pages","hasLeftSpill","hasRightSpill","spillOffset","extraPages","PaginationButton","props","Component","children","disabled","active","otherProps","jsx","classnames","Pagination","className","pageSizes","gotoPage","canPreviousPage","previousPage","nextPage","canNextPage","pageCount","pageIndex","pageOptions","pageSize","setPageSize","totalLength","i18n","f","pageNumbers","choices","value","jsxs","page","Select","name"],"mappings":"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"}