{"version":3,"file":"modal.stories-d397b68f.js","sources":["../../../react-formio/src/components/modal/modal.component.tsx","../../../react-formio/src/components/modal/removeModal.component.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport noop from \"lodash\";\nimport React, { PropsWithChildren, useEffect, useRef, useState } from \"react\";\n\nexport function useModal() {\n  const [show, setShowModal] = useState(false);\n\n  return {\n    show,\n    setShowModal,\n    openModal() {\n      setShowModal(true);\n    },\n    closeModal() {\n      setShowModal(false);\n    }\n  };\n}\n\nexport interface ModalProps extends Record<string, any> {\n  show?: boolean;\n  closeModal?: () => void;\n  onClose?: () => void;\n  footer?: any;\n  title?: string;\n}\n\nexport function Modal({\n  show,\n  children,\n  closeModal = noop as any,\n  onClose = noop as any,\n  title,\n  footer: ModalFooter,\n  style,\n  className = \"\",\n  ...props\n}: PropsWithChildren<ModalProps>) {\n  const titleRef: any = useRef<HTMLDivElement>();\n  const footerRef: any = useRef<HTMLDivElement>();\n  const [maxHeight, setMaxHeight] = useState<string>();\n\n  const onClickClose = () => {\n    closeModal();\n    onClose();\n  };\n\n  useEffect(() => {\n    if (titleRef.current || footerRef.current) {\n      const height = (titleRef?.current?.offsetHeight || 0) + (footerRef?.current?.offsetHeight || 0);\n\n      setMaxHeight(`calc(85vh - ${height}px)`);\n    } else {\n      setMaxHeight(\"auto\");\n    }\n  }, [show]);\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <div role={\"dialog\"} className={`formio-dialog formio-dialog-theme-default ${className}`}>\n      <div className='formio-dialog-overlay' onClick={onClickClose} />\n      <div style={style} className={\"formio-dialog-content\"}>\n        <div className={\"formio-dialog-wrapper\"}>\n          {title ? (\n            <div className={\"formio-dialog-title\"} ref={titleRef} data-testid={\"modalTitle\"}>\n              {title}\n            </div>\n          ) : null}\n\n          <div className='formio-dialog-body' style={{ maxHeight }} data-testid={\"modalBody\"}>\n            {show && children}\n          </div>\n\n          {ModalFooter ? (\n            <div className={\"formio-dialog-footer\"} ref={footerRef} data-testid={\"modalFooter\"}>\n              <ModalFooter {...props} closeModal={closeModal} onClose={onClickClose} />\n            </div>\n          ) : null}\n        </div>\n        <button\n          className='formio-dialog-close float-right btn btn-secondary btn-sm'\n          aria-label='close'\n          data-testid={\"closeModal\"}\n          onClick={onClickClose}\n        />\n      </div>\n    </div>\n  );\n}\n","import classnames from \"classnames\";\nimport React, { PropsWithChildren, useState } from \"react\";\n\nimport { iconClass } from \"../../utils/iconClass\";\nimport { InputText } from \"../input-text/inputText.component\";\nimport { Modal, ModalProps } from \"./modal.component\";\n\nfunction RemoveModalFooter({ value, valueToCompare, onSubmit, onClose, i18n = (f: string) => f }: ModalProps) {\n  return (\n    <div className={\"flex items-center justify-center bg-white p-2\"}>\n      <button data-testid='customCloseModal' className={\"btn btn-outline-dark mx-2\"} onClick={onClose}>\n        {i18n(\"Cancel\")}\n      </button>\n      <button\n        disabled={valueToCompare !== value}\n        data-testid='customSubmitModal'\n        className={\"btn btn-danger mx-2\"}\n        onClick={(e) => {\n          if (valueToCompare === value) {\n            onSubmit(e);\n          }\n        }}\n      >\n        <i className={classnames(iconClass(undefined, \"trash\"), \"mr-2\")} />\n        {i18n(\"Remove\")}\n      </button>\n    </div>\n  );\n}\n\nexport interface RemoveModalProps extends ModalProps {\n  valueToCompare: string;\n  itemType?: string;\n  i18n?: (f: string) => string;\n  maxWidth?: string;\n}\n\nexport function RemoveModal({ maxWidth = \"300px\", children, ...props }: PropsWithChildren<RemoveModalProps>) {\n  const { i18n = (f) => f } = props;\n  const [value, setValue] = useState();\n\n  return (\n    <Modal\n      {...props}\n      className={classnames(props.className, \"formio-dialog-theme-remove\")}\n      style={{ maxWidth }}\n      title={`Drop ${props.itemType?.toLowerCase()}`}\n      value={value}\n      footer={RemoveModalFooter}\n    >\n      <div className='px-4 pt-3 pb-5'>\n        <div className='pb-1'>\n          {children}\n          {i18n(\"To drop\")} <strong>{props.valueToCompare}</strong>,&nbsp;\n          {i18n(\"type the\")}&nbsp;\n          <strong>&quot;{props.itemType?.toLowerCase()}&quot;</strong>&nbsp;\n          {i18n(\"name\")} <strong>&quot;{props.valueToCompare}&quot;</strong>.\n        </div>\n        <InputText name='remove' value={value} onChange={(name, value) => setValue(value)} />\n      </div>\n    </Modal>\n  );\n}\n"],"names":["useModal","show","setShowModal","useState","Modal","children","closeModal","noop","onClose","title","ModalFooter","style","className","props","titleRef","useRef","footerRef","maxHeight","setMaxHeight","onClickClose","useEffect","height","_a","_b","jsx","jsxs","RemoveModalFooter","value","valueToCompare","onSubmit","i18n","f","e","classnames","iconClass","RemoveModal","maxWidth","setValue","InputText","name"],"mappings":"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"}